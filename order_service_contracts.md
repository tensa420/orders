## üöÄ –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è OrderService

–°–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑–∞–º–∏ –Ω–∞ –ø–æ—Å—Ç—Ä–æ–π–∫—É –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö –∫–æ—Ä–∞–±–ª–µ–π. –í—Å–µ –∑–∞–∫–∞–∑—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π `map`-—Å—Ç—Ä—É–∫—Ç—É—Ä–µ –≤
–ø–∞–º—è—Ç–∏. –°–µ—Ä–≤–∏—Å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å `InventoryService` –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ü–µ–Ω—ã –∑–∞–∫–∞–∑–∞ –∏ —Å `PaymentService` –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã.

---

### üìå –¶–µ–ª–∏

- –û—Å–≤–æ–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö gRPC/HTTP-—Å–µ—Ä–≤–∏—Å–æ–≤
- –£–ø—Ä–∞–≤–ª—è—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (in-memory)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–∫–∞–∑–∞: —Å–æ–∑–¥–∞–Ω–∏–µ ‚Üí –æ–ø–ª–∞—Ç–∞ ‚Üí –æ—Ç–º–µ–Ω–∞

---

### üìÅ –ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

#### `POST /api/v1/orders` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–µ—Ç–∞–ª–µ–π.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "user_uuid": "string",
  "part_uuids": [
    "string",
    "string"
  ]
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "order_uuid": "string",
  "total_price": 123.45
}
```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**

- –ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ —á–µ—Ä–µ–∑ `InventoryService.ListParts`.
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≤—Å–µ –¥–µ—Ç–∞–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç. –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–π –Ω–µ—Ç ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É.
- –°—á–∏—Ç–∞–µ—Ç `total_price`.
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `order_uuid`.
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–∫–∞–∑ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `PENDING_PAYMENT`.

---

#### `POST /api/v1/orders/{order_uuid}/pay` ‚Äî –æ–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞

–ü—Ä–æ–≤–æ–¥–∏—Ç –æ–ø–ª–∞—Ç—É —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "payment_method": "CARD"
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "transaction_uuid": "string"
}
```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**

- –ù–∞—Ö–æ–¥–∏—Ç –∑–∞–∫–∞–∑ –ø–æ `order_uuid`. –ï—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 Not Found.
- –í—ã–∑—ã–≤–∞–µ—Ç `PaymentService.PayOrder`, –ø–µ—Ä–µ–¥–∞—ë—Ç `user_uuid`, `order_uuid` –∏ `payment_method`. –ü–æ–ª—É—á–∞–µ—Ç`transaction_uuid`.
- –û–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑: —Å—Ç–∞—Ç—É—Å ‚Üí `PAID`, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `transaction_uuid`, `payment_method`.

---

#### `GET /api/v1/orders/{order_uuid}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑ –ø–æ UUID

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫–∞–∑–µ.

**–û—Ç–≤–µ—Ç:**

```json
{
  "order_uuid": "string",
  "user_uuid": "string",
  "part_uuids": [
    "string"
  ],
  "total_price": 123.45,
  "transaction_uuid": "string",
  "payment_method": "CARD",
  "status": "PAID"
}
```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**

- –ò—â–µ—Ç –∑–∞–∫–∞–∑ –ø–æ UUID.
- –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç.
- –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî 404 Not Found.

---

#### `POST /api/v1/orders/{order_uuid}/cancel` ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑

–û—Ç–º–µ–Ω—è–µ—Ç –∑–∞–∫–∞–∑.

**–û—Ç–≤–µ—Ç—ã:**

- `204 No Content` ‚Äî –∑–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–º–µ–Ω—ë–Ω
- `404 Not Found` ‚Äî –∑–∞–∫–∞–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω
- `409 Conflict` ‚Äî –∑–∞–∫–∞–∑ —É–∂–µ –æ–ø–ª–∞—á–µ–Ω –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–º–µ–Ω—ë–Ω

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**

- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞.
- –ï—Å–ª–∏ `PENDING_PAYMENT` ‚Äî –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ `CANCELLED`.
- –ï—Å–ª–∏ `PAID` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É 409.

---

### üíæ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–∫–∞–∑–∞ –≤ –ø–∞–º—è—Ç–∏

| –ü–æ–ª–µ             | –¢–∏–ø      | –û–ø–∏—Å–∞–Ω–∏–µ                                        |
|------------------|----------|-------------------------------------------------|
| order_uuid       | string   | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞                 |
| user_uuid        | string   | UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                               |
| part_uuids       | []string | –°–ø–∏—Å–æ–∫ UUID –¥–µ—Ç–∞–ª–µ–π                             |
| total_price      | double   | –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å                              |
| transaction_uuid | *string  | UUID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–µ—Å–ª–∏ –æ–ø–ª–∞—á–µ–Ω)                  |
| payment_method   | *string  | –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã (–µ—Å–ª–∏ –æ–ø–ª–∞—á–µ–Ω)                    |
| status           | string   | –°—Ç–∞—Ç—É—Å (`PENDING_PAYMENT`, `PAID`, `CANCELLED`) |

---

### üì¶ –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ: PaymentMethod

| –ù–∞–∑–≤–∞–Ω–∏–µ       | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ                 |
|----------------|----------|--------------------------|
| UNKNOWN        | 0        | –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–ø–æ—Å–æ–±       |
| CARD           | 1        | –ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞         |
| SBP            | 2        | –°–∏—Å—Ç–µ–º–∞ –±—ã—Å—Ç—Ä—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π |
| CREDIT_CARD    | 3        | –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞          |
| INVESTOR_MONEY | 4        | –î–µ–Ω—å–≥–∏ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞         |

---

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- –í—Å–µ 4 –º–µ—Ç–æ–¥–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å—Ç—Ä–æ–≥–æ –ø–æ OpenAPI-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—É
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ó–∞–∫–∞–∑—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ `map` –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞—â–∏—â–µ–Ω–æ –æ—Ç –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

---

### üîç –ü–æ–¥—Å–∫–∞–∑–∫–∏

- UUID –º–æ–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é `github.com/google/uuid`
- –°—Ç–∞—Ç—É—Å—ã –∏ –º–µ—Ç–æ–¥—ã –æ–ø–ª–∞—Ç—ã –ª—É—á—à–µ –æ—Ñ–æ—Ä–º–∏—Ç—å —á–µ—Ä–µ–∑ enum-–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
